<!DOCTYPE html>
<html>
<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>Status MongoDB</title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous">
  </script>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">




</head>
<body>

MioStatus
<br>

<br>

<p id = "status"> "{{status}}" </p> <!--Ottenuto inizialmente da flask con jinja, poi modificato dalla update()-->


<script>

    var socket = io();

    var intervalId = window.setInterval(function(){
        socket.emit('updateRequest', {"data": ""})
    }, 5000); //Aggiorna lo status ogni 5 secondi

    socket.on('update', function(data){
        console.log("Ricevuto update")
        console.log(data)
        console.log(data['update'])
        $("#status")[0].innerHTML = JSON.stringify(data)
        console.log($("#status"))
        console.log(data)
    })
  </script>

</body>
</html>